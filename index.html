<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Waveform draw-generate-edit-export</title>
  <link rel="stylesheet" href="waves.css">
</head>

<body>
  <div class="container">
    <h1>Andrej's 8bit waveshaper waveform draw-generate-edit-export tool</h1>
    <fieldset>
      <legend>Input</legend>
      <p>Paste your array contents to load them for editing (must be 256 bits separated
        with commas): </p>
      <textarea name="inBox" id="inBox" cols="50" rows="15"></textarea>
      <br>
      <button type="button" id="parse">Parse input</button>
      <button type="button" id="clear">Clear</button>
    </fieldset>
    <br>
    <fieldset>
      <legend>Math function input</legend>
      <p>You can input a math function (with x as your argument) and it will be rendered
        to an array of 256 byte-sized integers. The x values that the function will
        be calculated for are [-1, 1], in 1/128 increments (x = -1, -0.9921875,
        ... , 0.9921875-, 1).
        <br> The results will be scaled so that 1~128 and -1~-127, rounded to integers
        and capped at [-128, 127].
        <br>
      </p>
      <p>The parser is <a href="http://silentmatt.com/javascript-expression-evaluator/">Silent Matt's JavaScript Expression Evaluator</a>.
        You can check out the syntax right here: </p>
      <div class="accordion">
        <a href='#' class="accordion">Syntax</a>
        <div>
          <h4>Variables and constants</h4>
          <p>You can use these variables and constants in your function.</p>
          <table>
            <thead>
              <tr>
                <th>Name</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>x</td>
                <td>independent variable - function argument</td>
              </tr>
              <tr>
                <td>xs</td>
                <td>x scaled by pi (xs = x * pi), so trigonometric functions' period
                  becomes [-1, 1]</td>
              </tr>
              <tr>
                <td>s</td>
                <td>minimum step of our function: 1/256</td>
              </tr>
              <tr>
                <td>pi</td>
                <td>3.141592653589793</td>
              </tr>
              <tr>
                <td>e</td>
                <td>Euler's number (2.7182818284)</td>
              </tr>
              <tr>
                <td>phi</td>
                <td>Golden ratio (1.6180339887498)</td>
              </tr>
            </tbody>
          </table>
          <h4>Functions</h4>
          <p>The parser has several built-in “functions” that are actually operators.
            The only difference from an outside point of view, is that they cannot
            be called with multiple arguments and they are evaluated by the simplify
            method if their arguments are constant.</p>
          <table>
            <thead>
              <tr>
                <th>Function</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <th>sin(x)</th>
                <td>Sine of x (x is in radians)</td>
              </tr>
              <tr>
                <th>cos(x)</th>
                <td>Cosine of x (x is in radians)</td>
              </tr>
              <tr>
                <th>tan(x)</th>
                <td>Tangent of x (x is… well, you know)</td>
              </tr>
              <tr>
                <th>asin(x)</th>
                <td>Arc sine of x (in radians)</td>
              </tr>
              <tr>
                <th>acos(x)</th>
                <td>Arc cosine of x (in radians)</td>
              </tr>
              <tr>
                <th>atan(x)</th>
                <td>Arc tangent of x (in radians)</td>
              </tr>
              <tr>
                <th>sqrt(x)</th>
                <td>Square root of x. Result is NaN (Not a Number) if x is negative.</td>
              </tr>
              <tr>
                <th>log(x)</th>
                <td><strong>Natural</strong> logarithm of x (not base-10). It’s log
                  instead of ln because that’s what JavaScript calls it.</td>
              </tr>
              <tr>
                <th>abs(x)</th>
                <td>Absolute value (magnatude) of x</td>
              </tr>
              <tr>
                <th>ceil(x)</th>
                <td>Ceiling of x — the smallest integer that’s &gt;= x.</td>
              </tr>
              <tr>
                <th>floor(x)</th>
                <td>Floor of x — the largest integer that’s &lt;= x</td>
              </tr>
              <tr>
                <th>round(x)</th>
                <td>X, rounded to the nearest integer, using “gradeschool rounding”.</td>
              </tr>
              <tr>
                <th>exp(x)</th>
                <td><em>e</em><sup>x</sup> (exponential/antilogarithm function with
                  base <em>e</em>)</td>
              </tr>
            </tbody>
          </table>
          <h4>Pre-defined functions</h4>
          <p>Besides the “operator” functions, there are several pre-defined functions.
            You can provide your own, by binding variables to normal JavaScript
            functions. These are not evaluated by simplify.</p>
          <table>
            <thead>
              <tr>
                <th>Function</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <th>random(n)</th>
                <td>Get a random number in the range [0, n). If n is zero, or not provided,
                  it defaults to 1.</td>
              </tr>
              <tr>
                <th>fac(n)</th>
                <td>n! (factorial of n: “n * (n-1) * (n-2) * … * 2 * 1″)</td>
              </tr>
              <tr>
                <th>min(a,b,…)</th>
                <td>Get the smallest (“minimum”) number in the list</td>
              </tr>
              <tr>
                <th>max(a,b,…)</th>
                <td>Get the largest (“maximum”) number in the list</td>
              </tr>
              <tr>
                <th>pyt(a, b)</th>
                <td>Pythagorean function,
                  <abbr title="id est (that is)">i.e.</abbr> the c in “c<sup>2</sup> = a<sup>2</sup> + b<sup>2</sup>“</td>
              </tr>
              <tr>
                <th>pow(x, y)</th>
                <td>x<sup>y</sup>. This is exactly the same as “x^y”. It’s just provided
                  since it’s in the Math object from JavaScript</td>
              </tr>
              <tr>
                <th>atan2(y, x)</th>
                <td>arc tangent of x/y.
                  <abbr title="id est (that is)">i.e.</abbr> the angle between (0, 0) and (x, y) in radians.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      f(x) =
      <input type="text" id="mathInp">
      <br>
      <button type="button" id="mathParse">Parse expression</button>
    </fieldset>
    <br>
    <fieldset>
      <legend>Waveform drawing</legend>
      <p>Click [and drag] to draw your waveform. A click inside of a column places
        a square in it. Each column has exactly one square inside of it. The waveform
        must include a square in each column.</p>
      <div class="waveform">
      </div>
      <br>
      <button type="button" id="reset">Reset</button>
    </fieldset>
    <br>
    <fieldset>
      <legend>Waveform export</legend>
      <p>Click to export your drawn waveform to ASCII code you can paste into your
        array initializer in C.</p>
      <button type="button" id="export">Export</button>
      <br>
      <textarea name="outBox" id="outBox" cols="50" rows="15"></textarea>
    </fieldset>
    <br>
    <fieldset>
      <legend>License</legend>
      <p><strong>Waveshaper waveform editor and generator </strong>
        <br> <strong> Copyright (C) 2015 Andrej Radović (<a href="mailto:r.andrej@gmail.com">r.andrej@gmail.com</a>)</strong>        except for <a href="http://silentmatt.com/javascript-expression-evaluator/">JavaScript Expression Evaluator</a>        (Copyright (C) <a href="http://silentmatt.com/about/">Matthew Crumley</a>)
      </p>
      <p>This program is free software: you can redistribute it and/or modify it under
        the terms of the GNU General Public License as published by the Free Software
        Foundation, either version 3 of the License, or (at your option) any later
        version.
      </p>
      <p>This program is distributed in the hope that it will be useful, but WITHOUT
        ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
        FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
      <p>You should have received a copy of the GNU General Public License along with
        this program. If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>.
        <br>
        <a href="http://www.gnu.org/licenses/"><img src="gplv3-127x51.png" alt="gpl logo"></a>
      </p>
    </fieldset>
  </div>
  <script type="text/javascript" src="jquery-1.11.3.js"></script>
  <script type="text/javascript" src="parser.js"></script>
  <script type="text/javascript" src="waves.js"></script>
</body>

</html>
